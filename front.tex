% !TEX TS-program = XeLaTeX      Must use XeLaTeX to compile
% !TEX encoding = UTF-8 Unicode  File must be encoded at UTF-8

\documentclass[
    papersize={8.5in,11in}
]{orly}

\begin{document}


%%% MEASUREMENTS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% front offset
% redefine this if using in the dust cover
\renewcommand{\xfrontshift}{\fpeval{\xshift}pt}


%%% FRAME %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\showframe
\cutlines

\rulercircle{0.5*\xfrontshift}{-0.5*\yshift}
\rulerhorz{0.5 cm}{-1.5 cm-\yshift-\coverheight}
\rulervert{1.5 cm+\xfrontshift+\coverwidth}{-0.5 cm}


%%% FRONT %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\topbanner
\titlebanner

% animal
\begin{tikzpicture}[remember picture, overlay, shift={(current page.north west)}, xshift=\xfrontshift, yshift=-\yshift]
    \node[anchor=north] at + ($(0.5*\coverwidth pt, -3.7*\bheight)$)
    {\includegraphics[height=8.5cm]{./img/sunwave}};
\end{tikzpicture}


\begin{tikzpicture}[remember picture, overlay, shift={(current page.north west)}, xshift=\xfrontshift, yshift=-\yshift]

    \node[anchor=north west, font=\itshape, scale=1.2] at + ($(\bmargin, \titleoffset+1*\bmargin)$)
        {\Huge Navigating};

    \node[anchor=north west, text=white, scale=3, text width=0.9*\bwidth] at + ($(\bmargin*1.2, \titleoffset pt - 0.5*\bmargin)$)
        {\Huge Legacy\\ Code};

    \node[anchor=north west, font=\itshape] at + ($(\bwidth*0.77, \titleoffset-\titleheight-0.65*\bheight)$)
        {\Large advanced rm -rf *};

    \node[anchor=north west] at ($(current page.south west) + (\xfrontshift, \yshift) + (\bmargin, 3*\bheight)$)
        {\huge \oreilly O'RLY\small$^\textsuperscript{\textregistered}$};

    % TODO there must be a better way; how to justify text in the node?
    \node[anchor=north west, font=\itshape] at ($(current page.south west) + (\xfrontshift, \yshift) + (\bwidth*0.74, 3*\bheight)$)
        {\huge Michael Teresi};
\end{tikzpicture}


\end{document}
